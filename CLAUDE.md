# 자취생을 위한 냉장고 레시피 추천 서비스

이 문서는 자취생들을 위한 레시피 추천 서비스의 기획 및 기술 스택을 설명합니다. 사용자 냉장고 속 재료를 기반으로 레시피를 추천하며, AI 에이전트를 활용한 유튜브 레시피 영상 분석이 핵심 기능입니다.

## 1. 서비스 개요

본 서비스는 자취생들이 냉장고에 있는 재료를 효율적으로 활용하여 쉽게 요리할 수 있도록 돕는 레시피 추천 서비스입니다. 사용자들은 자신의 냉장고에 있는 재료를 입력하면, 해당 재료들로 만들 수 있는 레시피를 추천받게 됩니다.

## 2. 시스템 아키텍처

### 2.1. 전체 구조
```
[클라이언트] ←→ [API 서버] ←→ [데이터베이스]
                    ↑
            [AI 에이전트 서버]
```

### 2.2. 데이터 플로우
1. **관리자**: AI 에이전트로 YouTube 레시피 분석 → API 서버에 저장
2. **사용자**: 냉장고 재료 등록 → 맞춤 레시피 추천 받기

## 3. 핵심 기능

### 3.1. AI 에이전트를 활용한 유튜브 레시피 분석 ✅ **완료**

**기능**: 관리자가 유튜브 레시피 영상 링크를 입력하면, AI 에이전트가 해당 영상을 분석하여 레시피에 필요한 재료 목록을 자동으로 추출합니다.

**AI 에이전트의 처리 과정**:
- `youtube_transcript`를 활용하여 유튜브 영상의 자막을 추출
- LLM을 통해 자막에서 재료를 분석 및 추출
- 재료 일반화 및 정제 (오타 수정, 구체적 재료명 → 일반화)
- 요리 장르 분류 (한식, 중식, 일식, 양식 등 13가지)
- 중복 체크 후 API 서버에 저장

**구현 현황**:
- ✅ Python 기반 AI 에이전트 완료
- ✅ Streamlit 웹 인터페이스 완료
- ✅ API 서버 연동 완료
- ✅ 중복 방지 로직 완료

### 3.2. 클라이언트 애플리케이션 🚧 **진행 예정**

**주요 기능**:
1. **로그인 화면** - OAuth 기반 사용자 인증
2. **냉장고 재료 관리 화면** - 보유 재료 추가/삭제
3. **레시피 추천 화면** - 냉장고 재료 기반 정렬된 레시피 목록

**설계 요구사항**:
- **모바일 우선 설계**: 대부분 사용자가 모바일로 요리할 때 레시피를 확인
- **직관적 재료 관리**: 자주 바뀌는 냉장고 재료를 쉽게 추가/제거
- **스마트 재료 추천**: 서버 재료 목록 기반 자동완성 + 사용자 추가 시 서버 업데이트
- **재료 매칭 표시**: 레시피 하단에 보유 재료 강조 표시

## 4. 기술 스택

### 4.1. AI 에이전트 (재료 추출)
- **기술**: Python + LangChain + OpenAI GPT
- **라이브러리**: youtube_transcript_api, streamlit, requests
- **역할**: 유튜브 영상 분석, 재료 추출, 요리 장르 분류

### 4.2. 백엔드 API 서버
- **기술**: NestJS + TypeScript
- **데이터베이스**: Supabase (PostgreSQL)
- **ORM**: Prisma
- **인증**: JWT + OAuth (Supabase)
- **역할**: REST API 제공, 비즈니스 로직 처리, 데이터 관리

### 4.3. 클라이언트 애플리케이션
- **기술**: Next.js + TypeScript
- **스타일링**: Tailwind CSS (모바일 우선)
- **상태 관리**: React Query + Zustand
- **역할**: 사용자 인터페이스, 모바일 최적화 UX

### 4.4. 데이터베이스 구조
```sql
-- 사용자 테이블
users (id, email, name, profile_image)

-- 레시피 테이블  
recipes (id, title, youtube_url, thumbnail, category_id, author_id, user_id)

-- 재료 테이블
ingredients (id, name)

-- 사용자 보유 재료
user_ingredients (user_id, ingredient_id, quantity, unit)

-- 레시피별 필요 재료
recipe_ingredients (recipe_id, ingredient_id)

-- 요리 카테고리
categories (id, name, description)
```

## 5. 클라이언트 화면 설계

### 5.1. 로그인 화면
- **기능**: Google OAuth 기반 간편 로그인
- **디자인**: 심플한 로고 + 구글 로그인 버튼
- **모바일 최적화**: 터치 친화적 버튼 크기

### 5.2. 냉장고 재료 관리 화면
**주요 컴포넌트**:
- **재료 검색창**: 자동완성 기능
- **보유 재료 목록**: 태그 형태로 표시, 쉬운 삭제
- **추가 버튼**: 플로팅 액션 버튼
- **카테고리별 분류**: 채소, 육류, 조미료 등

**UX 플로우**:
1. 검색창에 재료명 입력 → 서버 재료 목록 자동완성
2. 없는 재료 입력 시 → "새 재료 추가하시겠습니까?" 확인
3. 재료 선택 → 수량/단위 입력 (선택사항)
4. 저장 → 내 냉장고에 추가

### 5.3. 레시피 추천 화면
**레시피 카드 구성**:
- **썸네일**: YouTube 썸네일 이미지
- **제목**: 레시피 이름
- **매칭률**: 보유 재료 / 전체 재료 (예: 7/10)
- **카테고리 태그**: 한식, 중식 등
- **소요 시간**: 예상 조리 시간 (추후 추가)

**정렬 옵션**:
- 🔥 **매칭률 높은 순** (기본)
- 🆕 최신 등록순
- 🍽️ 카테고리별

**레시피 상세 화면**:
- **YouTube 영상 링크**: 바로 이동 버튼
- **필요 재료 목록**: 
  - ✅ **보유 재료**: 초록색 강조
  - ❌ **부족한 재료**: 회색 처리
- **요리 팁**: AI가 분석한 추가 정보 (추후)

## 6. 개발 로드맵

### ✅ 1단계: AI 에이전트 & API 서버 (완료)
- YouTube 레시피 분석 시스템
- 데이터베이스 구조 설계
- REST API 구현

### 🚧 2단계: 클라이언트 애플리케이션 (진행 예정)
- 로그인 화면 구현
- 냉장고 재료 관리 기능
- 레시피 추천 시스템

### 📋 3단계: 고도화 (추후)
- 레시피 평점 시스템
- 요리 완료 인증
- 소셜 기능 (레시피 공유)
- 식자재 쇼핑 연동

## 7. 핵심 사용자 시나리오

1. **회원가입**: 구글 계정으로 간편 가입
2. **냉장고 설정**: 보유 재료 등록 (최초 1회)
3. **일상 사용**: 
   - 재료 추가/사용 시 앱에서 업데이트
   - 요리할 때 추천 레시피 확인
   - YouTube 링크로 바로 요리 영상 시청
4. **지속 사용**: 새로운 재료 구매 시 앱에 추가

